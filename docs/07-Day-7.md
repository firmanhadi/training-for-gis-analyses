# (PART) WebGIS {-}
# GeoServer

## Pendahuluan

**Concept of webgis**

Internet-based GIS has been widely recognized in both
public and private organizations as a fundamental tool for
storage and distribution of data to targeted audiences
(Brovelli et al. 2016).
The GIS-based Web portals provide a centralized and
uniform interface to access the distributed and heteroge-
neous resources and data services (Karnatak et al. 2007).
According to (Peng 2001), Internet GIS refers to a
network-centric GIS tool that uses the Internet as a primary
means of providing access to distributed data and other
information, disseminating spatial information, and con-
ducting GIS analysis.


**GIS Web service**

GIS Web services provide direct access to data, eliminating
the need to download a dataset and import it into your
desktop application, instead using a simple HTTP interface
(URL) to access the data. The department uses a variety of
service protocols including Web Map Service (WMS), Web
Map Tile Service (WMTS), and Web Feature Service (WFS) provided by the Open Geospatial Consortium
(OGC) and ESRI Web mapping services.

**Web Services for Spatial Data**

Web services for spatial data enable using data from servers
directly with desktop GIS software, without downloading
first data as files to the own computer. In such a way, it is
possible to use always up-to-date data easily. All most
common commercial and open-source GIS desktop software
products support Web standards (MapInfo, ArcGIS, QGIS,
and GRASS). Web services are used so that the user con-
nects to the service using a special menu. For connection,
user needs to know the server’s URL. After connecting to
the server, the user gets a list of available map layers. Web
services are also easy to use in map applications on Web.
Data may be requested also directly with a HTTP GET or
POST request.
Most common Web service standards of Open Geospatial
Consortium’s (OGC) are: Web Map Service (WMS), Web
Map Tile Service (WMTS), Web Feature Service (WFS),
and Web Coverage Service (WCS).
WMS and WMTS return map image in raster format,
WFS data in vector format, and WCS data in raster format.
In WMTS, maps are available only in pre-defined scales and
size. In WMS, scale and map size can be set without
restrictions. WMTS, are faster, because often the map tiles
are already ready at the server. For requesting only part of
data different filters may be used, for example, BBOX
defines the area of interest.

**GIS Web Services**

The main challenges of geospatial (Shengru and Abdelguerfi
2006) data are:
Geospatial data are in bulk in size; loading the data and map
into the client is complex; reload of map and data takes time;
geospatial data is highly heterogeneous, and complex
geospatial problems need large quantities of geospatial data
from multiple sources and locations.


**Web GIS components**

The major components of the whole portal are categorized
into navigation tools, legend tools, search tools, and other
tools such as WMS layer adding tool, layer manager. Fea-
tures on the map can be identifying using map identify tool.
Distance measuring tool of map also has been included as
part of spatial map analysis tool. Results of map query or
area of interest can be printed out along with detail legend
using print tool. The size, font type, and map output can be
customized using this tool. The map can be produced in
various file formats such as PNG, JPEG, GIF, or PDF.
Region-specific zoom is made possible using quick zoom
tool.

Searching of non-spatial attributes could also be per-
formed by the users. To do this, user first selects a layer and
then, fill a from its listed fields/columns. An attribute to be
searched is entered in the textbox. Clicking the “Search by
Value” will create a pop-up window listing the attribute table
matching the search criteria and subsequent zooming in the
map and highlighted.

The automatic identification of map on mouse cursor
moves is made possible using “Auto Identify” widget. The
user selects a layer and its corresponding attribute(s), once
applied; the user sees the attributes corresponding to the map
location when mouse cursor moves.
The addition of WMS layers is also possible on this
WebGIS portal. First we host the layers having similar
projection through the GeoServer (Kamel and Honda 2006)
(Fig. 3.1).
<!-- ## Konsep WebGIS -->

<!-- ```{r fig1424, fig.cap='Open Attribute Table',echo=FALSE, message=FALSE, warning=FALSE, out.width='30%', fig.asp=.75, fig.align='center'} -->
<!-- knitr::include_graphics("img/webgis/pic1.png") -->
<!-- ``` -->
## Komponen yang diperlukan

Sebelum Anda dapat menggunakan GeoServer, Anda perlu menginstal beberapa perangkat lunak yang dibutuhkan. GeoServer merupakan aplikasi Java. Salah satu hal penting yang paling
Anda pastikan adalah virtual Java bekerja pada mesin Anda.

Ada dua paket utama Java. Tergantung pada apa yang Anda berencana untuk melakukan dengan Java, Anda mungkin
ingin menginstal sebuah JDK (Java Development Kit) atau JRE
( Java Runtime Environment).

JDK memungkinkan Anda untuk mengkompilasi kode Java, sedangkan JRE cukup memenuhi syarat 
untuk menjalankan sebagian besar aplikasi Java. Mulai dari rilis 2.0, GeoServer tidak perlu instalasi JDK penuh, dan Anda
dapat memilih JRE. JDK hanya diperlukan jika Anda berencana untuk menulis dan mengkompilasi kode
Java. Hal ini dilakukan jika Anda ingin memodifikasi kode sumber GeoServer, untuk memperbaiki kode, atau menambahkan
fungsionalitas.


Versi saat ini dari GeoServer membutuhkan Java 8.  Perlu diingat bahwa Java 9 tidak didukung, mungkin Anda dapat menginstal Geoserver.  Hanya saja Anda tidak akan mendapatkan 
dukungan untuk setiap masalah yang Anda temukan saat menggunakan Geoserver dengan Java 9.

Untuk melakukan pemeriksaan apakah sistem Anda memiliki Java JRE 8, silahkan ikuti langkah berikut :

1. Dari menu Start, pilih Control Panel.

2. Pilih Programs. Jika sistem anda memiliki JRE / JDK, Anda akan melihat ikon dengan
logo Java, seperti yang ditunjukkan pada gambar berikut. Ini adalah cara pintas ke panel kontrol Java:

\begin{figure}

{\centering \includegraphics[width=0.6\linewidth]{images/07/fig71} 

}

\caption{Cek Java}(\#fig:fig71)
\end{figure}


## Instalasi

### Tomcat

Paket Tomcat yang digunakan dalam pelatihan ini adalah paket yang disediakan oleh Bitnami. Paket Bitnami Tomcat versi MS Windows tersebut dapat diunduh di tautan berikut [https://bitnami.com/redirect/to/654730/bitnami-tomcatstack-7.0.96-0-windows-x64-installer.exe](https://bitnami.com/redirect/to/654730/bitnami-tomcatstack-7.0.96-0-windows-x64-installer.exe)

Tahapan instalasi Bitnami Tomcat dapat dilihat pada video berikut :


```
## PhantomJS not found. You can install it with webshot::install_phantomjs(). If it is installed, please make sure the phantomjs executable can be found via the PATH variable.
```

<div class="figure">
<iframe src="https://www.youtube.com/embed/IC_wnPZYyYA" width="0.99\linewidth" height="400px" style="border: none;"></iframe>
<p class="caption">(\#fig:embed1)Instalasi Tomcat</p>
</div>

### GeoServer

GeoServer dapat diunduh di halaman tautan berikut [http://geoserver.org/download/](http://geoserver.org/download/) dan pilihlah tipe instalasi yang tersedia. Anda akan menemukan beberapa paket berbeda untuk GeoServer. Kita akan menggunakan versi Arsip Web (.war):


\begin{center}\includegraphics[width=0.6\linewidth]{images/07/fig72} \end{center}

Anda dapat memilih rilis dari dua cabang yang berbeda - **Stable** dan **Maintenance**. Keduanya dibangun untuk keperluan produksi, sehingga Anda dapat memilih apa pun yang Anda inginkan. Kami sarankan Anda memilih rilis terbaru karena berisi semua fitur baru yang baru saja dirilis oleh tim pengembang.

Terlepas dari Production tab, Anda dapat memilih dua cabang lainnya - **Development** dan **Archived**. Di dalam bagian Development, Anda akan menemukan **Night Build**, rilis ini tidak cocok untuk produksi karena rentan terhadap *bug*, tetapi berisi semua perubahan yang dilakukan pengembang pada kode sumber, sehingga Anda dapat menggunakannya untuk menguji perbaikan bug yang Anda temukan:


\begin{center}\includegraphics[width=0.6\linewidth]{images/07/fig73} \end{center}

**Archived** berisi rilis yang lebih lama. Ini mungkin berguna jika Anda menggunakan rilis GeoServer lama dan perlu memutakhirkannya ke yang lebih baru, tetapi Anda tidak ingin melompat ke yang terakhir. Kasus penggunaan lain mungkin jika Anda menggunakan GeoServer di lingkungan di mana versi JRE lama, 7.x atau 6.x, tersedia dan Anda tidak dapat memutakhirkannya.

Tahapan pengunduhan GeoServer dapat dilihat pada video berikut :

<div class="figure">
<iframe src="https://www.youtube.com/embed/NxV6bIpkaGw" width="0.99\linewidth" height="400px" style="border: none;"></iframe>
<p class="caption">(\#fig:embed2)Download GeoServer</p>
</div>

Di bagian berikutnya, kita akan melakukan instalasi GeoServer dengan cara men-*deploy* arsip web di Apache Tomcat. Server aplikasi Java hampir dapat dijalankan pada sistem operasi apa pun dengan cara yang sama. Begitu pula dengan GeoServer yang di-**deploy** pada Tomcat. 

Proses instalasi GeoServer adalah sebagai berikut:

1. Pastikan bahwa Tomcat Server berjalan dengan membuka tautan [http://localhost/index.jsp](http://localhost/index.jsp). Apabila isi dari halaman tersebut seperti pada Gambar \@ref(fig:gs44), maka kita dapat melanjutkan ke proses berikutnya.


2. Buka tautan **Manager App**. Ketikkan username dan password seperti yang dibuat ketika instalasi.

3. Unggah berkas geoserver.war di bagian WAR file to deploy.

4. Klik Deploy.

- Apabila proses ini gagal dengan pesan kesalahan yang menunjukkan bahwa ukuran berkas melebihi yang ditentukan, edit berkas web.xml yang ada di direktori __*C:/Bitnami/tomcatstack-7.0.96-0/apache-tomcat/webapps/manager/WEB-INF*__

- Ubah ukuran max-file-size dan max-request agar lebih besar dari 100 MB, dengan menambahkan angka 1 di depan angka 8, sehingga menjadi 183886080. 

```
<multipart-config>
      <!-- 50MB max -->
      <max-file-size>83886080</max-file-size>
      <max-request-size>83886080</max-request-size>
      <file-size-threshold>0</file-size-threshold>
</multipart-config>
```

- Simpan berkas web.xml

- Stop Tomcat Server

\begin{figure}

{\centering \includegraphics[width=0.4\linewidth]{images/08/gs111} 

}

\caption{Stop Tomcat Server}(\#fig:fig111)
\end{figure}


- Jalankan ulang Tomcat Server.

\begin{figure}

{\centering \includegraphics[width=0.4\linewidth]{images/08/gs112} 

}

\caption{Start Tomcat Server}(\#fig:fig112)
\end{figure}

- Ulangi kembali proses Deploy.

5. Apabila proses Deploy Geoserver berhasil, maka menu Manager App akan terlihat **/geoserver** di dalam daftar aplikasi Tomcat. 

\begin{figure}

{\centering \includegraphics[width=0.4\linewidth]{images/08/gs39} 

}

\caption{Folder aplikasi GeoServer}(\#fig:fig39)
\end{figure}


## Menjalankan GeoServer

<div class="figure">
<iframe src="https://www.youtube.com/embed/BGBthqeqmrs" width="0.99\linewidth" height="400px" style="border: none;"></iframe>
<p class="caption">(\#fig:embed3)Start GeoServer</p>
</div>


## Administrasi GeoServer

Dalam bab ini, kita akan menjelajahi antarmuka administrasi GeoServer. Ini adalah konsol utama tempat Anda dapat mengontrol hampir semua pengaturan instalasi GeoServer Anda. Dalam rilis pertama, itu sedikit rumit, tetapi karena seri 2.x, nama menu dan ikon konsisten di setiap bagian. Ada juga antarmuka yang ditingkatkan untuk GeoWebCache terintegrasi, di mana Anda dapat melakukan hampir semua konfigurasi caching dari antarmuka GeoServer. Kabar baiknya adalah bahwa kita akan menggunakan mouse lebih banyak di sini daripada bab lain, sehingga keyboard akan mendapatkan istirahat.

Dalam bab ini, kita akan membahas semua bagian dari Antarmuka Administrasi Web. Secara khusus, kami akan mengeksplorasi topik berikut secara rinci:

Memeriksa status GeoServer Anda dan mencatat konten file
Mempratinjau data Anda
Pengaturan tuninguntuk Layanan Peta Web ( WMS ), Layanan Fitur Web ( WFS ), dan Layanan Cakupan Web ( WCS )
Tuning global pengaturan
Melakukan permintaan melalui antarmuka demo

### Dashboard 

Mengakses antarmuka hanya membutuhkanAnda untuk membuka browser dan arahkan ke http: // localhost: 8080 / geoserver / web . Jika Anda telah membaca bab sebelumnya dan menjalankan contoh-contohnya, Anda harus mengubah kata sandi default untuk pengguna admin.

Anda bisa menggunakan yang baru untuk login lagi di GeoServer; kita sekarang akan memusatkan perhatian kita pada tata letak antarmuka.

Pertimbangkan tangkapan layar berikut. Anda dapat mengenali tiga area utama di antarmuka web GeoServer:


\begin{figure}

{\centering \includegraphics[width=0.6\linewidth]{images/08/gs3} 

}

\caption{Dashboard GeoServer}(\#fig:fig74)
\end{figure}


Area pusat menunjukkan Anda beberapa informasi tentang status GeoServer - elemen di dalamnya berubah sesuai dengan operasi yang Anda lakukan. Tepat setelah Anda masuk, ini menunjukkan kepada Anda detail singkat dari data yang dikonfigurasi, dan peringatan atau kesalahan yang harus Anda koreksi. Baris terakhir menunjukkan nomor rilis dan ada tautan ke kotak surat administrator; ini default ke ahli geografi kuno yang terkenal sampai Anda memasukkan data Anda.

Di sisi kanan, ada daftar yang menunjukkan kemampuan GeoServer kepada Anda. Akronim yang tercantum mengacu pada protokol OGC standar; kita akan membicarakan beberapa dari mereka secara terperinci dalam buku ini, dan masing-masing dari mereka memiliki setidaknya satu rilis yang didukung. Angka-angka adalah tautan ke dokumen XML yang secara tepat menggambarkan data dan operasi yang didukung oleh setiap protokol. Mereka adalah sumber daya yang sangat berharga bagi klien yang mau menggunakan layanan Anda.

Cobalah untuk membuka WMS 1.1.1tautan dan buka hasilnya dalam editor teks. Anda dapat dengan mudah memahami beberapa bagian. Pertimbangkan yang berikut ini:

Yang pertama berisi deskripsi layanan yang dibuka:

```
<Service> 
<Name>OGC:WMS</Name> 
<Title>GeoServer Web Map Service</Title>
```

Kemudian Anda dapat menemukan beberapa informasi tentang administrator:

```
<ContactInformation> 
       <ContactPersonPrimary> 
         <ContactPerson>Stefano Iacovella</ContactPerson> 
         <ContactOrganization>Packt Publishing  
            Ltd.</ContactOrganization> 
       </ContactPersonPrimary> 
<ContactPosition>Chief geographer</ContactPosition
```       
       
       
Daftar operasi yang didukung dan URL dasar untuk permintaan adalah sebagai berikut:

```
<Request> 
       <GetCapabilities> 
       <Format>application/vnd.ogc.wms_xml</Format> 
       <DCPType> 
       <HTTP> 
         <Get> 
            <OnlineResource xmlns:xlink="http://www.w3.org/1999/xlink"
               xlink:type="simple"xlink:href="http://localhost:8080
                 /geoserver/wms?SERVICE=WMS&amp;"/> 
         </Get> 
        <Post> 
          <OnlineResource xmlns:xlink="http://www.w3.org/1999/xlink"   
             xlink:type="simple" xlink:href="http://localhost:8080
                /geoserver/wms?SERVICE=WMS&amp;"/> 
        </Post> 
       </HTTP> 
       ... 
       </GetCapabilities> 
       <GetMap> 
        ... 
       </GetMap> 
       <GetFeatureInfo> 
        ... 
       </GetFeatureInfo> 
       <DescribeLayer> 
        ... 
       </DescribeLayer> 
       <GetLegendGraphic> 
        ... 
       </GetLegendGraphic> 
       <GetStyles> 
        ... 
       </GetStyles> 
       </Request> 
```

### About dan Status

#### Server Status

\begin{figure}

{\centering \includegraphics[width=0.6\linewidth]{images/08/gs4} 

}

\caption{Status server}(\#fig:gs4)
\end{figure}

#### Logs

\begin{figure}

{\centering \includegraphics[width=0.6\linewidth]{images/08/gs5} 

}

\caption{Status server}(\#fig:gs5)
\end{figure}
### Data

Bagian ini berisi tautanke mesin konfigurasi data. Seperti yang Anda duga, untuk menerbitkan peta di internet dengan GeoServer, Anda perlu menambahkan data spasial ke dalamnya. Pertimbangkan tangkapan layar berikut:

Di area ini, Anda dapat mengonfigurasi akses data dan cara aksesnya ke klien:

####Layer Preview

membuka formulir termasuk setiap lapisan yang diterbitkan di GeoServer. Selain itu, jika Anda belum menambahkan data ke instalasi GeoServer Anda, Anda akan menemukan beberapa lapisan sampel sudah terdaftar. Mengklik pada OpenLayerstautan, yang ditempatkan di sebelah kanan nama lapisan, Anda dapat membuka contoh aplikasi web untuk melihat seperti apa data Anda terlihat. Suka.

The Keyhole Markup Language ( KML ) link membiarkan Anda men-download data dalam format yang sesuai untuk pratinjau di Google Earth. Ada juga beberapa format lain yang tersedia, tercantum dalam kotak drop-down di ujung kanan baris. Pertimbangkan tangkapan layar berikut:


\begin{figure}

{\centering \includegraphics[width=0.6\linewidth]{images/08/gs6} 

}

\caption{Layer preview}(\#fig:gs6)
\end{figure}



### Layanan

### Pengaturan

### Tile Caching

### Security




## Menambahkan Data

Anda akan mempelajari tipe data apa yang dapat Anda gunakan dengan GeoServer. Kami akan mengambil ikhtisar singkat tentang format yang didukung, baik bawaan maupun melalui ekstensi, dan cara menambahkannya ke konfigurasi Anda. Lebih khusus lagi, kami akan memuat data dari shapefile, tabel PostGIS, dan tabel Oracle menggunakan data sensus AS.

### Pengaturan Data

#### Workspace

Bagian ini menjelaskan cara melihat dan mengkonfigurasi ***workspace***. Dianalogikan dengan ***namespace***, ***workspace*** adalah wadah yang mengatur item lainnya. Di GeoServer, ***workspace*** sering digunakan untuk mengelompokkan layer yang sama. Layer dapat dirujuk dengan nama ruang kerja mereka, titik dua, nama lapisan (misalnya sf:archsites). Dua layer yang berbeda dapat memiliki nama yang sama selama mereka memiliki ***workspace*** yang berbeda (misalnya sf:states dan topp:states).

\begin{figure}

{\centering \includegraphics[width=0.6\linewidth]{images/08/gs7} 

}

\caption{Workspaces}(\#fig:gs7)
\end{figure}

Untuk melihat atau mengedit workspace, klik nama workspace. Halaman konfigurasi workspace akan ditampilkan pada Gambar \@ref(fig:gs1)


\begin{figure}

{\centering \includegraphics[width=0.5\linewidth]{images/08/gs1} 

}

\caption{Edit Workspace}(\#fig:gs1)
\end{figure}

Workspace didefinisikan oleh nama dan URI Namespace (Uniform Resource Identifier). Nama workspace terbatas hingga sepuluh karakter dan tidak boleh memiliki spasi. URI mirip dengan URL, kecuali URI tidak perlu menunjuk ke lokasi aktual di web, dan hanya perlu menjadi pengidentifikasi unik. Untuk URI Workspace, kami sarankan menggunakan URL yang terkait dengan proyek Anda, dengan pengidentifikasi jejak yang berbeda. Misalnya, http://localhost/batam_pg adalah URI untuk ruang kerja "batam_pg".


#### Store

\begin{figure}

{\centering \includegraphics[width=0.6\linewidth]{images/08/gs8} 

}

\caption{Store}(\#fig:gs8)
\end{figure}


### Penambahan Data

Data yang dapat diunggah ke dalam GeoServer dapat bermacam-macam, di antaranya adalah direktori Shapefiles, GeoPackage, PostGIS, GeoTIFF, WMS dan lainnya seperti disajikan pada Gambar \@ref(gs2).


\begin{figure}

{\centering \includegraphics[width=0.6\linewidth]{images/08/gs2} 

}

\caption{Workspaces}(\#fig:gs2)
\end{figure}

#### Direktori Shapefiles

Untuk menambah data ke dalam GeoServer, lakukan tahapan berikut

1. Buatlah workspace baru. 

Kita akan menambahkan workspace berdasarkan data sampel GeoServer yaitu San Fransisco. Isikan ***sf*** sebagai nama workspace baru dan ***san_fransisco*** untuk Namespace_URI. Jangan lupa untuk klik **Submit** untuk membuat workspace.

\begin{figure}

{\centering \includegraphics[width=0.6\linewidth]{images/08/gs14} 

}

\caption{Workspaces}(\#fig:gs14)
\end{figure}

2. Tambahkan Stores baru.

- Klik Stores di panel sebelah kiri, dan klik tautan **Add new Store**. Pilih ***workspace*** sf dan isikan ***sf_shp*** untuk **Data Source Name**. 

- Untuk **Connection Parameters** klik Browse untuk memilih direktori di mana vektor shapefiles tersimpan. Untuk kasus ini, klik direktori ***data/data/sf***.


\begin{figure}

{\centering \includegraphics[width=0.6\linewidth]{images/08/gs15} 

}

\caption{Sumber data vektor}(\#fig:gs15)
\end{figure}
- Klik Save.

3. Pilih Layer yang akan diunggah dengan mengklik tautan **Publish**, sebagai contoh ***archsites***.

\begin{figure}

{\centering \includegraphics[width=0.6\linewidth]{images/08/gs16} 

}

\caption{Memilih Layer baru}(\#fig:gs16)
\end{figure}

4. Definisikan data layer dan publikasinya.

- Isikan nama layer, misalnya ***archsites***. 

\begin{figure}

{\centering \includegraphics[width=0.6\linewidth]{images/08/gs17a} 

}

\caption{Edit layer name}(\#fig:gs17a)
\end{figure}

- Klik ***Compute from data*** untuk mengisikan **Bounding Boxes**, dan klik ***Compute from native bounds*** untuk **Lat/Lon Bounding Box**.


\begin{figure}

{\centering \includegraphics[width=0.6\linewidth]{images/08/gs17b} 

}

\caption{Parameter Bounding Boxes}(\#fig:gs17b)
\end{figure}

- Klik **Save** untuk menyimpan data.

\begin{figure}

{\centering \includegraphics[width=0.6\linewidth]{images/08/gs17c} 

}

\caption{Klik Save}(\#fig:gs17c)
\end{figure}


#### PostGIS

#### Raster


## Mengakses Layer




